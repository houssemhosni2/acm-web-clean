<div class="main-card mb-3">
    <div class="card-body card mr-b">
        <p-table #dt [responsive]="true" [autoLayout]=true [value]="loanIbPaginationEntity.resultsIbLoans"
            (onLazyLoad)="reloadLoansList($event)" [lazy]="true" [lazyLoadOnInit]="false" sortMode="multiple"
            [totalRecords]="loanIbPaginationEntity.totalElements"
            [rowsPerPageOptions]="[5,10,20,50,100]" [paginator]="true" [pageLinks]="5" [rows]="10"
            [columns]="selectedColumns">

            <ng-template pTemplate="header" let-columns>
                <tr>
                    <!-- actions button -->
                    <th *ngFor="let col of columns" [pSortableColumn]="col.field" class="text-center">
                        <div class="center-elem text-center">
                            {{col.header | translate}}
                            <p-sortIcon [field]="col.field" class="pl-1"></p-sortIcon>
                        </div>
                    </th>
                    <th style='width: 40px;'></th>
                </tr>
                <tr>
                    <th *ngFor="let col of columns" [ngSwitch]="col.field">
                    <select *ngSwitchCase="'customerType'" class="form-control"
                        (change)="dt.filter($event.target.value, col.field, 'equals')">
                        <option value="null">{{'category_loan.all' | translate}}</option>
                        <option value="INDIV">{{'category_customer.individual' | translate}}</option>
                        <option value="ORG">{{'category_customer.organisation' | translate}}</option>
                        <option value="GRP">{{'category_customer.groupe' | translate}}</option>
                    </select>
                        <input *ngSwitchCase="'customerNameNoPipe'" class="form-control" type="text"
                            (input)="dt.filter($event.target.value, col.field, 'contains')">
                        <input *ngSwitchCase="'customerAddress'" class="form-control" type="text"
                            (input)="dt.filter($event.target.value, col.field, 'contains')">
                        <select *ngSwitchCase="'productDescription'" class="form-control"
                            (change)="dt.filter($event.target.value, col.field, 'equals')">
                            <option *ngFor="let product of products" value="{{product.value}}">{{product.label}}
                            </option>
                        </select>
                        <input *ngSwitchCase="'applyAmountTotal'" class="form-control" type="number" min="0" step="50"
                            (input)="dt.filter($event.target.value, col.field, 'contains')">
                        <input *ngSwitchCase="'applyDate'" class="form-control" type="date"
                            (input)="dt.filter($event.target.value, col.field, 'contains')">
                        <input *ngSwitchCase="'ownerName'" class="form-control" type="text"
                            (input)="dt.filter($event.target.value, col.field, 'contains')">
                    </th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-loans let-rowData let-columns="columns">
                <tr [pSelectableRow]="rowData">
                    <td *ngFor="let col of columns" [ngSwitch]="col.field" class="text-center">
                        <div *ngSwitchCase="'customerType'">
                            <div *ngIf="rowData[col.field] === 'INDIV'">
                              <i class="lnr-user" > </i>
                            </div>
                            <div *ngIf="rowData[col.field] === 'GRP'">
                              <i class="lnr-users"> </i>
                            </div>
                            <div *ngIf="rowData[col.field] === 'ORG'">
                              <i class="lnr-apartment"> </i>
                            </div>
                         </div>
                        <div *ngSwitchCase="'customerNameNoPipe'">{{rowData[col.field]}}</div>
                        <div *ngSwitchCase="'customerAddress'">{{rowData[col.field]}}</div>
                        <div *ngSwitchCase="'productDescription'">{{rowData[col.field]}}</div>
                        <div *ngSwitchCase="'applyAmountTotal'">
                            {{rowData[col.field] | number : this.devToolsServices.getDecimalPlaces(loans.currencyDecimalPlaces) }}
                            {{ loans?.currencySymbol }} </div>
                        <div *ngSwitchCase="'applyDate'">{{rowData[col.field] | date: 'dd/MM/yyyy'}}</div>
                        <div *ngSwitchCase="'ownerName'">{{rowData[col.field]}}</div>
                    </td>
                    <td>
                        <button class="btn btn-warning" (click)='loanIbDetails(rowData)'>
                            <i class="pe-7s-look btn-icon-wrapper text-white"></i>
                          </button>
                    </td>

                </tr>
            </ng-template>
        </p-table>
    </div>
</div>
