<div *ngIf="display" class="accordion mb-1" id="accordionExample">
    <div class="card">
        <div class="card-header d-flex justify-content-between" id="headingOne" data-target="#collapseCustomerNote"
            aria-expanded="true" aria-controls="collapseCustomerNote" (click)="toggleCollapse()">
            <div>
                <i class="vsm-icon pe-7s-date fa-lg px-2"></i> {{'setting.charge_fee.charge_fees'| translate }}
            </div>
        </div>
        <div id="collapseCustomerNote" [ngClass]="(expanded===true)?'collapse show':'collapse'"
            aria-labelledby="headingOne">
            <div *ngIf="chargeFees.length > 0">
                <div class="card-body">
                    <!-- bouton popup-->
                    <div class="page-title-actions mb-3 d-flex justify-content-end">
                        <button class="btn-shadow d-inline-flex align-items-center btn btn-primary" type="button"
                            (click)="addFee(modalContent)">
                            <fa class="mx-2" name="plus" _nghost-gyt-c2="" ng-reflect-name="plus">
                                <i _ngcontent-gyt-c2="" aria-hidden="true" class="fa fa-plus"
                                    ng-reflect-klass="fa fa-plus" ng-reflect-ng-class=""></i>
                            </fa> {{'button.add' | translate}}
                        </button>
                    </div>
                </div>
                <div class="table-responsive">
                    <table class="mb-0 table green">
                        <thead>
                            <tr>
                                <th>{{'setting.charge_fee.label'| translate }}</th>
                                <th>{{'setting.charge_fee.code'| translate }}</th>
                                <th>{{'setting.amount'| translate }}</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr
                                *ngFor="let fee of chargeFees | slice: (page-1) * pageSize : (page-1) * pageSize + pageSize; let i = index ">
                                <td class="ACM-table-historyNote-td-2"> {{fee.label}} </td>
                                <td class="ACM-table-historyNote-td-2"> {{fee.code}} </td>
                                <td class="ACM-table-historyNote-td-2"> {{fee.amount}} </td>
                                <td>
                                    <button class="btn btn-warning text-white" (click)="editFee(modalContent, fee)">
                                        <fa-icon [icon]="library.getIconDefinition('fas', 'pencil-alt')"></fa-icon>
                                    </button>
                                    <button class="btn btn-danger text-white" (click)="deleteFee(fee)">
                                        <fa-icon [icon]="library.getIconDefinition('fas', 'trash')"></fa-icon>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="card-footer pb-2">
                    <div class="row no-gutters w-100">
                        <div class="col-xl-6 col-lg-6 col-md-12">
                            <ngb-pagination [collectionSize]="chargeFees.length" [(page)]="page" [pageSize]="pageSize"
                                size="sm" [maxSize]="3" [boundaryLinks]="true">
                            </ngb-pagination>
                        </div>
                        <div class="col-xl-6 col-lg-6 col-md-12">
                            <div class="d-flex justify-content-lg-end">
                                <select class="custom-select" style="width: auto" name="pageSize"
                                    [(ngModel)]="pageSize">
                                    <option selected [ngValue]="5">{{'pagination.5_item'| translate }}</option>
                                    <option [ngValue]="10">{{'pagination.10_item'| translate }}</option>
                                    <option [ngValue]="20">{{'pagination.20_item'| translate }}</option>
                                    <option [ngValue]="50">{{'pagination.50_item'| translate }}</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div *ngIf="chargeFees.length === 0">
                <div class="card-body">
                    <div class="page-title-actions mb-3 d-flex justify-content-end">
                        <button class="btn-shadow d-inline-flex align-items-center btn btn-primary" type="button"
                            (click)="addFee(modalContent)">
                            <fa class="mx-2" name="plus" _nghost-gyt-c2="" ng-reflect-name="plus">
                                <i _ngcontent-gyt-c2="" aria-hidden="true" class="fa fa-plus"
                                    ng-reflect-klass="fa fa-plus" ng-reflect-ng-class=""></i>
                            </fa> {{'button.add' | translate}}
                        </button>
                    </div>
                    <h6 style="color: red;" class="pt-3">{{ 'setting.charge_fee.no_fees' | translate }}</h6>
                </div>
            </div>
        </div>
    </div>
</div>
<ng-template #modalContent let-close="close">
    <div dir="{{getDirection()}}" [ngClass]="{'text-end': translate.currentLang === 'ar'}">
        <div class="modal-header py-2">
            <h5 class="modal-title">{{ 'setting.charge_fee.add_fee' | translate }}'</h5>
            <button type="button" class="close ACM-modal-header-{{translate.currentLang}}">
                <span aria-hidden="true" (click)="closeModal()">&times;</span>
            </button>
        </div>
        <form class="form" [formGroup]='groupForm' (ngSubmit)="onSubmit()">
            <div class="card-body">
                <div class="position-relative pb-4">
                    <label>{{'setting.charge_fee.code'| translate }}</label>
                    <div class="input-group">
                        <select type="text" class="form-control form-group" formControlName="id">
                            <option *ngFor="let item of chargeFeesList" [value]="item.id"> {{item.label}}</option>
                        </select>
                    </div>
                </div>
                <div class="position-relative pb-4">
                    <label>{{'setting.charge_fee.values.fixed_amount'| translate }}</label>
                    <div class="input-group form-group">
                        <div>
                            <input type="number" class="form-control" formControlName="amount">
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="mb-1 mx-2 btn btn-outline-danger" type="reset" (click)="closeModal()">{{'button.cancel'
                    | translate}}</button>
                <button class="mb-1 btn btn-primary" type="submit">{{'button.save' | translate}}</button>
            </div>
        </form>
    </div>
</ng-template>