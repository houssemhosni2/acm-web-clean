<div class="main-card mb-3 card">
    <div class="card-body">
        <p-table #dt [responsive]="true" [autoLayout]=true [value]="expensesPaginationEntity.resultsExpenses"
            (onLazyLoad)="reloadExpensesList($event)" [lazy]="true" [lazyLoadOnInit]="false" sortMode="multiple"
            [multiSortMeta]="" [totalRecords]="expensesPaginationEntity.totalElements"
            [rowsPerPageOptions]="[5,10,20,50,100]" [paginator]="true" [pageLinks]="5" [rows]="10"
            [columns]="selectedColumns">
            <ng-template pTemplate="header" let-columns>
                <tr>
                    <!-- actions button -->
                    <th *ngFor="let col of columns" [pSortableColumn]="col.field" class="text-center">
                        <div class="center-elem text-center">
                            {{col.header | translate}}
                            <p-sortIcon [field]="col.field" class="pl-1"></p-sortIcon>
                        </div>
                    </th>
                    <th style='width: 40px;'></th>
                </tr>
                <tr>
                    <th *ngFor="let col of columns" [ngSwitch]="col.field">
                      <input *ngSwitchCase="'id'" class="form-control" type="number"
                      (input)="dt.filter($event.target.value, col.field, 'contains')">
                        <select *ngSwitchCase="'expensesTypeLibelle'" class="form-control"
                            (change)="dt.filter($event.target.value, col.field, 'equals')">
                            <option value="null">{{'category_loan.all' | translate}}</option>
                            <option *ngFor="let type of expensesTypes" value="{{type.id}}">
                                {{type.libel}}</option>
                        </select>
                        <select *ngSwitchCase="'branchDescription'" class="form-control"
                            (change)="dt.filter($event.target.value, col.field, 'equals')">
                            <option value="null">{{'category_loan.all' | translate}}</option>
                            <option *ngFor="let branchEntity of branchEntitys" value="{{branchEntity.id}}">
                                {{branchEntity.description}}</option>
                        </select>
                        <input *ngSwitchCase="'expensesAmount'" class="form-control" type="number" min="0" step="50"
                            (input)="dt.filter($event.target.value, col.field, 'contains')">
                        <input *ngSwitchCase="'tellerName'" class="form-control" type="text"
                            (input)="dt.filter($event.target.value, col.field, 'contains')">
                        <input *ngSwitchCase="'ownerName'" class="form-control" type="text"
                            (input)="dt.filter($event.target.value, col.field, 'contains')">
                        <input *ngSwitchCase="'applyDate'" class="form-control" type="date"
                            (input)="dt.filter($event.target.value, col.field, 'contains')">
                    </th>
                    <th style='width: 40px;'></th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-loans let-rowData let-columns="columns">
                <tr [pSelectableRow]="rowData">
                    <td *ngFor="let col of columns" [ngSwitch]="col.field" class="text-center">
                        <div *ngSwitchCase="'id'">{{rowData[col.field]|number:'5.0':'fr'}}</div>
                        <div *ngSwitchCase="'expensesTypeLibelle'">{{rowData[col.field]}}</div>
                        <div *ngSwitchCase="'branchDescription'">{{rowData[col.field]}}</div>
                        <div *ngSwitchCase="'expensesAmount'">{{rowData[col.field] | number : this.decimalPlaces:'fr' }}</div>
                        <div *ngSwitchCase="'tellerName'">{{rowData[col.field]}}</div>
                        <div *ngSwitchCase="'ownerName'">{{rowData[col.field]}}</div>
                        <div *ngSwitchCase="'applyDate'">{{rowData[col.field] | date: 'dd/MM/yyyy'}}</div>
                    </td>
                    <td>
                        <button class="btn btn-warning" (click)='expensesDetails(rowData)'>
                            <i class="pe-7s-look btn-icon-wrapper text-white"></i>
                        </button>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</div>
