<div class="card-hover-shadow-2x mb-1 card" *ngIf="visibility!=false">
  <div class="card-header d-flex justify-content-between" data-target="#collapse" aria-expanded="true"
    aria-controls="collapseCustomerAccount" (click)="toggleCollapse()">
    <div>
      <i class="lnr-location text-secondary pr-2"></i>
      {{'disbursement.card_disbursement_info'| translate }}

    </div>
    <div>
      <i [ngClass]="(expanded===true)?'lnr-chevron-up text-secondary':'lnr-chevron-down text-secondary'"></i>
    </div>
  </div>
  <div [ngClass]="(expanded===true)?'collapse show':'collapse'" aria-labelledby="headingOne"
    data-parent="#accordionExample">

    <form [formGroup]="formDisbursement" (change)="changeFormBankInformation()">
      <div class="card-body">
        <div class="row">
          <div class="col-xl-6 col-sm-6 col-md-6 px-1">
            <div class="position-relative form-group">
              <label>{{'disbursement.disbursement_method'| translate }}</label>
              <span class="text-danger">*</span>
              <select class="form-control" formControlName="disbursementMethod"
                (change)="changeDisbursementMethod()" [compareWith]="compareDisbursementMethode"
                [attr.disabled]="(selectedCustomer!== null && mezaStatus) ? '' : null" required>
                <option selected value disabled>
                  {{'disbursement.default_select_meth'| translate }}
                </option>
                <option *ngFor="let meth of listDisbursementMethod" [ngValue]="meth">
                  {{meth.description}}
                </option>
              </select>
            </div>
          </div>

          <div class="col-xl-6 col-sm-6 col-md-6 px-1" *ngIf="displayBankCode">
            <div class="position-relative form-group">
              <label>{{'disbursement.bank_code'| translate }} </label>
              <span class="text-danger">*</span>
              <!-- Auto complete bank code-->
              <p-autoComplete [(ngModel)]="bankCodeField" [suggestions]="filteredBankCodeListFields" [dropdown]="true"
                (completeMethod)="filterBankCodeFields($event)" (onSelect)="changeBranchCode()" formControlName="bankCode"
                placeholder="{{'disbursement.default_select_bank_code'| translate }}" field="description" id="user-autocomplete"
                [size]="30" [minLength]="1" [forceSelection]="true" class="from-row">
                <ng-template let-bankCodeField pTemplate="item">
                  {{bankCodeField.description}}
                </ng-template>
              </p-autoComplete>
            </div>
          </div>
            <!-- Auto complete branch code-->
          <div class="col-xl-6 col-sm-6 col-md-6 px-1" *ngIf="displayBranchCode">
            <div class="position-relative form-group">
              <label>{{'disbursement.branch_code'| translate }} </label>
              <span class="text-danger">*</span>
              <p-autoComplete [disabled]="disabledBranch" [dropdown]="true" [(ngModel)]="branchCodeField"
                [suggestions]="filteredBranchCodeListFields" (completeMethod)="filterBranchCodeFields($event)"
                formControlName="branchCode" placeholder="{{'disbursement.branch_code'| translate }}" field="description" [size]="30" [minLength]="1" [forceSelection]="true" >
                <ng-template let-branchCodeField pTemplate="item">
                  {{branchCodeField.description}}
                </ng-template>
              </p-autoComplete>
            </div>
          </div>
          <div class="col-xl-6 col-sm-6 col-md-6 px-2" *ngIf="displayAccountNumber">
            <label>{{'disbursement.account_number'| translate }}</label>
            <span class="text-danger">*</span>
            <div class="input-group form-group">
              <input [placeholder]="placeHolderAccountNumber"  [maxlength] = "cardNumberMaxLength" type="text" class="form-control" formControlName="accountNumber" [readonly]="isDisabled">
              <button class="btn-icon btn-icon-only btn btn-success" ngbTooltip="Refresh meza card number"
              (click)="generateMezaCardInternal()" *ngIf="enableRefresh()">
                <i class="pe-7s-refresh btn-icon-wrapper"> </i></button>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>
